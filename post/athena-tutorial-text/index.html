<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Athena 软件新手教程 | 缩水公众号版本 | 两个圈 Two Circles</title>

<link rel="shortcut icon" href="https://twocircles24.github.io/favicon.ico?v=1603952085376">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://twocircles24.github.io/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->


    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-174490678-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());
        gtag('config', 'UA-174490678-1');
    </script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="头像">
        <div class="site-name gt-c-content-color-first">
            两个圈 Two Circles
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="/" class="menu gt-a-link">
                            Home
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/archives" class="menu gt-a-link">
                            Archives
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/tags" class="menu gt-a-link">
                            Tag
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/friends" class="menu gt-a-link">
                            Link
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="https://anchor.fm/twocircles24" class="menu gt-a-link" target="_blank">
                            Podcast
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/about" class="menu gt-a-link">
                            About
                        </a>
                    
                </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1603952085376" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    Athena 软件新手教程 | 缩水公众号版本
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        · 2020-10-28 ·
                    </time>
                    
                        <a href="https://twocircles24.github.io/tag/G7mDq_2PN/" class="post-tags">
                            # Introduction
                        </a>
                    
                        <a href="https://twocircles24.github.io/tag/EESs-vLM1L/" class="post-tags">
                            # XAFS
                        </a>
                    
                        <a href="https://twocircles24.github.io/tag/vvYMcBDX6w/" class="post-tags">
                            # Tutorial
                        </a>
                    
                </div>
                <div class="post-content">
                    <p>(9 min 30 s reading) 如果看过视频了就不必看这篇了，只是作为保存。</p>
<!-- more -->
<p><strong>首发于“研之成理”微信公众号，我是原作者。</strong></p>
<p>同步辐射吸收光谱 （X-ray Absorption Spectroscopy）是一项常见的结构表征技术，可以提供中心原子的邻近信息，例如配位原子和数量。虽然在网上有很多介绍同步辐射的理论知识，但用于数据处理的软件教程相对较少。今天来跟大家分享下如何使用 Demeter 软件中的 Athena 来处理同步辐射吸收谱数据。</p>
<br/>
<br/>
<h2 id="1-demeter-软件简短介绍">1. Demeter 软件简短介绍</h2>
<p>Demeter 软件是由 Bruce Ravel 教授发布免费数据处理软件，在这里可以下载到 <a href="https://bruceravel.github.io/demeter/">Demeter 最新版本</a>。在安装过程中需要注意路径必须为全英文，因为默认路径是 C盘中用户名下的一个子文件夹。如果你的用户名是中文，请换一个路径安装。</p>
<p>安装好后，会有三个软件：Athena，Artemis 和 Hephaestus。其中 Athena 主要功能是对实验数据的处理得到 XANES 和 EXAFS；Artemis 是对 EXAFS 数据进行拟合得到配位数等一系列信息；Hephaestus 是与同步辐射实验相关的数据库。</p>
<p>对于大部分的数据处理，Athena 是最为重要的。除得到并展示 XANES 和 EXAFS 数据以外，还可以进行线性拟合（Linear Combination Fitting）、主成分分析（Principle Component Analysis）等更高阶的数据处理。可以帮助大家从数据中挖掘出更多的信息。</p>
<p>更多常见的 EXAFS数据处理教程放在了B站<a href="https://space.bilibili.com/625516278">“担子菌的担担面”</a>账号上，包含但不限于数据拟合，小波变换等等，欢迎有需要的同学观看。</p>
<p><img src="https://i.loli.net/2020/10/29/NYKijkyFVxMhd8z.png" alt="Demeter Website.png" loading="lazy"><br>
图1. Demeter 官方网站，左侧为下载链接。</p>
<br/>
<h2 id="2-athena-界面介绍">2. Athena 界面介绍</h2>
<p>打开软件后，可以看到软件在 Main window窗口下大致可以分为左右两区域：左为参数区，右为数据展示区。</p>
<p>在左方的参数设置区域，从上到下分别是：</p>
<ol>
<li>Main window （主窗口）：用于切换不同的数据处理功能；</li>
<li>Current Group （当前数据）：包含数据路径，对应的元素 (Element) ，边 (Edge) 和能量移动值 (Energy Shift) 等基本信息；</li>
<li>Normalization and background removal parameters （归一化和背景移除参数）：对原始数据的基本处理得到XANES 和 k 空间图像；</li>
<li>Forward Fourier transform parameters （傅里叶变换参数）：从 k 空间到 R 空间变换；</li>
<li>Back Fourier transform parameters （反傅里叶变换参数）：从 R 空间到 q 空间变换；</li>
<li>Plotting parameters （画图参数）：对图像展示进行放大或缩小等。<br>
右方空白部分是数据所在的几何位置，右下方用于不同形式的数据展示。</li>
</ol>
<p><img src="https://i.loli.net/2020/10/29/986qSYQijrUA4DG.png" alt="2AthenaMain_blank.png" loading="lazy"><br>
图 2. Athena 主界面。</p>
<br/>
<p><strong>注：以下<a href="http://bruceravel.github.io/XAS-Education/">演示数据</a>来源于 Demeter 官网教程，由 Bruce Ravel 教授提供。</strong></p>
<br/>
<h2 id="3-数据加载">3. 数据加载</h2>
<p>我选用了演示数据包中铁纤矿样品 (Fe_lepidocrocite) 来演示。原始数据数据可以直接用鼠标拖入到 Athena 中空白区域得到加载数据对话框如下：</p>
<p><img src="https://i.loli.net/2020/10/29/Die7LYt8srAP1Fw.png" alt="3importdata_.png" loading="lazy"><br>
图 3. 加载原始数据界面。</p>
<br/>
<p>首先我们需要先从实验中知道哪些数据是入射光、透射光还有荧光。左上方选择的是样品谱图。Energy 是 x 轴，y 轴是 μ(E) 通常由两组或两组以上的数据进行简单加减乘除得到。由于各个线站录入数据的格式会有所不同，请大家结合具体情况分析。我以这套数据为例，我们希望得到样品透射谱 (transmission spectrum)，那么会根据公式 ln(入射光I<sub>0</sub> /透射光 I<sub>1</sub>) ，选择分子为 I<sub>0</sub>，分母为 I<sub>t</sub> 并且勾选上 Natural log。由于这套数据中还有参考谱图 (reference)，在左下方勾选上 import reference channel，勾选上分子为 I<sub>t</sub>，分母为 I<sub>f</sub>。</p>
<p>点击 OK ,三张 Fe_lepidocrocite.(000, 100, 200)原始数据就加载好出现在了右上方的空白区域。通常来说，Athena 软件在加载好数据后就会自动选择参数粗略处理好数据，大部分参数不需要过多改动。</p>
<p><img src="https://i.loli.net/2020/10/29/JVRmweBdE5jyDSY.png" alt="4Athenawdata - Copy.png" loading="lazy"><br>
图 4. 加载数据后大部分参数 Athena 已经自动给出。</p>
<br/>
<p><img src="https://i.loli.net/2020/10/29/YcpGWSC7xA6DXh5.png" alt="5dataAthena.png" loading="lazy"><br>
图 5. 加载数据后就可以大致看到 E, k, R, q 空间的样子。</p>
<br/>
<h2 id="4-能量校正和汇合">4. 能量校正和汇合</h2>
<p>点击 Main window 会看到一系列可选功能窗口。进行能量校正，选择 Calibrate data。</p>
<p><img src="https://i.loli.net/2020/10/29/cqkYzL9g8UTZsyM.png" alt="6caliratestart - Copy.png" loading="lazy"><br>
图 6. 点击 Main Window 出现菜单，选择 Calibrate data。</p>
<br/>
<p>能量校正的原理是通过校正参考谱图 (Reference) 到正确能量位置来校正样品谱图。所以先选择带 Ref 的谱图，以 deriv(E) 形式展示。点击 select point，用鼠标在图像中取最高峰顶点（黄色十字圈处），点击 Calibrate 就完成了对第一张谱图 (.000) 能量校正。对剩下的 .100 和 .200 数据做同样操作。</p>
<p><img src="https://i.loli.net/2020/10/29/otQlGfuKY7X3nAm.png" alt="7calibratepage.png" loading="lazy"><br>
图 7. Calibrate data 界面。</p>
<br/>
<p><img src="https://i.loli.net/2020/10/29/IJVgHMDYp4O7Kjc.png" alt="8calibrationgraph - Copy.png" loading="lazy"><br>
图 8. 利用一阶微分 XANES 来矫正谱图</p>
<br/>
<p>接着回到 Main window，到右上方数据区域勾选上所有样品数据。点击上方工具栏中的 Merge ，使用 Merge norm(E) 得到由这三张实验数据图共同得到的一张同步辐射吸收图。这么做的主要原因是为了提高数据信噪比。在这里选择 Merge norm (E) 仅仅是基于这一套数据。不同的数据处理方式会略有不同。</p>
<p><img src="https://i.loli.net/2020/10/29/98ofAwXmVEKY2Iu.png" alt="9merge.png" loading="lazy"><br>
图 9. 在 Athena 上面工具栏中 Merge 选项的位置。</p>
<br/>
<p><img src="https://i.loli.net/2020/10/29/WMuE2wI49q6Ljh3.png" alt="10newmerge.png" loading="lazy"><br>
图 10. 点击 Merge norm(E) 后出现新的图，名字为 “merge”。</p>
<br/>
<h2 id="5-展示-xanes-k-空间和-r-空间">5. 展示 XANES, k 空间和 R 空间</h2>
<p>在 Merge 谱图后，通常我只会对这一张图进行更多参数上的微调，比如 E0 的数值还有 k-range, R-range 选择。但就大部分情况而言，数据质量本身不错的情况下，软件自动给出的参数就已经比较合适了。</p>
<p>在 Athena 界面右下方可以选择谱图展示为归一化后的 μ(E)，也就是 XANES 以及 k 空间和 R 空间。点击黄色按钮是只展示我选择某一数据的谱图（蓝色高亮），而紫色按钮是展示所有我勾选上的数据（数据前有方框打勾）。k 的权重也可以通过 Plotting k-weights 选择。在 E, k, R 空间中有不同的展示，以 E 空间为例可以 Plot in energy。里面我可以选择展示原始数据，背景函数 (background)，归一化数据 (normalized) 等等，如果只是想给其他人粗略展示数据，就到 Athena 的图像软件中选择第一个图标 (Copy plot to clipboard) 再直接 Ctrl + V 到自己文档里。</p>
<p>对于展示数据的区域选择，第一个方法是可以在右下方里面输入，以 E 空间为例，有 Emin 和 Emax。这是以吸收边能量 E0 为参照，展示 (E0 – Emin, E0 + Emax) 区间内的数据。如果想放大到 XANES 区间，就可以改成 Emin -20, Emax 100 等略小的数值，再点击 E 就可以刷新。另一个办法是直接倒图像界面中使用按住鼠标右键不动，拖动鼠标就可以选择一部分先要展示的区域，点击鼠标左键，就可以放大到之前的区域。</p>
<p><img src="https://i.loli.net/2020/10/29/4rBdSCTvnjbgUis.png" alt="11Emin - Copy.png" loading="lazy"><br>
图 11. 利用右下方 Emin, Emax 调整数据展示区间。</p>
<br/>
<p><img src="https://i.loli.net/2020/10/29/CIcTqvk2YJGV3gs.png" alt="12mousecursor.png" loading="lazy"><br>
图 12. 利用鼠标直接框选想放大的区域。</p>
<br/>
<p><img src="https://i.loli.net/2020/10/29/iLmFEGpgj7D13No.png" alt="13k - Copy.png" loading="lazy"><br>
图 13. 点击紫色 k 按键可展示所有的 k 空间数据。</p>
<br/>
<p><img src="https://i.loli.net/2020/10/29/3iSDIZGOEcaArX6.png" alt="14R - Copy.png" loading="lazy"><br>
图 14. 点击紫色 k 按键可展示所有的 k 空间数据。</p>
<br/>
<h2 id="6-保存和输出数据">6. 保存和输出数据</h2>
<p>对数据处理好后，如果我想把数据转到 OriginLab 等作图软件画图时，点击左上方 File，常会用到两种保存数据方式：Save current group as… 和 Save marked group as… 。前者是仅保存蓝色高亮的单独一组数据，后者是保存所有勾选上的数据。根据自己需求可以保存为有 XANES 等不同的数据形式，点击对应的选项即可。</p>
<p><img src="https://i.loli.net/2020/10/29/GHJk7jWgbOosn28.png" alt="15save - Copy.png" loading="lazy"><br>
图 15. 保存数据的多种选项。</p>
<br/>
<p>Athena 软件会根据不同的数据形式使用不同的后缀名来命名。例如我想保存这四张勾选上的图为 k 空间，依次选择 File → Save marked groups as → k3χ(k)，跳出保存窗口看到数据会被保存为 .chik3 的文件形式。不用惊慌，可以直接保存后用笔记本 Notepad打开看到所有数据以及备注信息，十分方便。若要加载到 OriginLab 里面，可以删掉所有文本信息只留下数列，拖入 OriginLab 窗口中即可。</p>
<p><img src="https://i.loli.net/2020/10/29/chS68OTuJPnXl7v.png" alt="16chik3 - Copy.png" loading="lazy"><br>
图 16. 保存为 .chik3 格式，也可以直接在后面改为 .txt 后缀方便打开。</p>
<br/>
<p><img src="https://i.loli.net/2020/10/29/ImQdiJ7RWwlAzqj.png" alt="17notepad.png" loading="lazy"><br>
图 17. 保存好的文件包含了数据和一些文本信息便于记录。</p>
<h2 id="7-结语">7. 结语</h2>
<p>这一篇只是非常简单地介绍基本功能处理，还有更多有关参数选择的讨论已经发布在 Bilibili 上，搜索“担子菌的担担面”就可以找到我，也欢迎你通过邮件和我交流 (licouplings@gmail.com)。</p>
<br/>
<br/>
<br/>
<br/>
<pre><code>感谢你的阅读
</code></pre>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">下一篇</div>
                <a href="https://twocircles24.github.io/post/my-stay-at-home-workstation/" class="post-title gt-a-link">
                    My Stay-at-home Workstation 
                </a>
            </div>
        

        

        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">My anger matters, so does yours. </div>
    <div class="social-container">
        
            
        
            
        
            
                <a href="https://weibo.com/xafs/" target="_blank">
                    <i class="fab fa-weibo gt-c-content-color-first"></i>
                </a>
            
        
            
        
            
                <a href="https://t.me/twocircles24" target="_blank">
                    <i class="fab fa-telegram gt-c-content-color-first"></i>
                </a>
            
        
            
                <a href="https://mp.weixin.qq.com/s/iriyLldckgQST4zTIz2_YQ" target="_blank">
                    <i class="fab fa-weixin gt-c-content-color-first"></i>
                </a>
            
        
    </div>
    <div class="footer-info">
        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="https://twocircles24.github.io/atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
