<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>为什么我的 EXAFS 数据质量不行 | 两个圈 Two Circles</title>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-9GGCLQK1YP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9GGCLQK1YP');
</script>

<script>
(function() {
  var s = localStorage.getItem('theme');
  var m = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  var t = s || (m ? 'dark' : 'light');
  document.documentElement.setAttribute('data-theme', t);
})();
</script>

<link rel="stylesheet" href="/css/main.min.0677f7c8c7dea0ca8172cc72c1b76103dc0d451fc5eb5625b2194298e44c4127.css" integrity="sha256-Bnf3yMfeoMqBcsxywbdhA9wNRR/F61YlshlCmORMQSc=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@5/dist/photoswipe.css">




<script defer src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>
        <script src="/js/main.f2b85918d76ed992fd44333e06e475c6b58b77f6c86f2d9276db1056d86725c2.js" integrity="sha256-8rhZGNdu2ZL9RDM&#43;BuR1xrWLd/bIby2SdtsQVthnJcI=" crossorigin="anonymous"></script>


</head>
<body>
  <header>
    <div class="site-header">
<div class="site-header__left">
<a class="brand" href="/">两个圈 Two Circles</a>
<button class="theme-toggle" type="button" aria-label="Toggle theme" data-theme-toggle>
<svg class="icon icon-moon" viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="20" height="20">
<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
</svg>
<svg class="icon icon-sun" viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" width="20" height="20">
<circle cx="12" cy="12" r="4"></circle>
<path d="M12 2v2m0 16v2M22 12h-2M4 12H2m15.364 6.364-1.414-1.414M8.05 8.05 6.636 6.636m10.728 0L15.95 8.05M8.05 15.95 6.636 17.364"></path>
</svg>
</button>
</div>
<div class="site-header__right">
<button class="nav-toggle" type="button" aria-controls="main-menu" aria-expanded="false" data-nav-toggle>Menu</button>

  <nav id="main-menu" class="site-nav" data-nav aria-label="Primary">
    <ul class="nav-list">
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a href="/archive/">Archive</a>
    </li>
    <li>
      <a href="/tags/">Tags</a>
    </li>
    <li>
      <a href="/about/">About</a>
    </li>
    </ul>
  </nav>

</div>
</div>

  </header>
  <main>
    
  
  
  
    
    
      
    
  
  
  <div class="page-with-toc">
    <aside class="toc-sidebar" aria-label="Contents">
  <nav class="toc-nav">
    <h2>Contents</h2>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#xas-看图说话不如回家种地">XAS 看图说话不如回家种地</a>
      <ul>
        <li><a href="#第一怀疑对象样品本身">第一怀疑对象：样品本身</a></li>
        <li><a href="#第二怀疑对象检测器">第二怀疑对象：检测器</a></li>
        <li><a href="#第三怀疑对象beamline-station">第三怀疑对象：beamline station</a></li>
        <li><a href="#你想得到的想不到的-bug">你想得到的想不到的 bug</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </nav>
  </aside>




    <article class="content">
      <h1>为什么我的 EXAFS 数据质量不行</h1>
      <p class="post-meta"><time datetime="2021-07-17T22:50:38&#43;00:00">July 17, 2021</time></p>





      <details class="toc-dropdown">
  <summary>Contents</summary>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#xas-看图说话不如回家种地">XAS 看图说话不如回家种地</a>
      <ul>
        <li><a href="#第一怀疑对象样品本身">第一怀疑对象：样品本身</a></li>
        <li><a href="#第二怀疑对象检测器">第二怀疑对象：检测器</a></li>
        <li><a href="#第三怀疑对象beamline-station">第三怀疑对象：beamline station</a></li>
        <li><a href="#你想得到的想不到的-bug">你想得到的想不到的 bug</a></li>
      </ul>
    </li>
  </ul>
</nav>
</details>




      <p>(6 min 30 s reading) 非常感谢愿意分享数据的同学！</p>
<!-- raw HTML omitted -->
<p><strong>阅读提示1：回答仅代表我一个人的看法，不代表正确解决问题的办法。我有不知道答案的问题，也有不懂回答错误的问题。如果我有讲错地方，请告诉我还有其他人。</strong></p>
<p><strong>阅读提示2：这篇文章所有的猜测仅仅是基于我丰富的大脑想象力，请不要认为是黄金准则。这里面提及的一些内容对于新手来说会完全超纲，别害怕，看不懂确实说明你基础不行。</strong></p>
<hr>
<h2 id="xas-看图说话不如回家种地">
  XAS 看图说话不如回家种地
  <a class="heading-anchor" href="#xas-%e7%9c%8b%e5%9b%be%e8%af%b4%e8%af%9d%e4%b8%8d%e5%a6%82%e5%9b%9e%e5%ae%b6%e7%a7%8d%e5%9c%b0" aria-label="Link to this section">
    <span class="sr-only">Link to this section</span>
    <span aria-hidden="true">#</span>
  </a>
</h2>
<p>几天前收到一位观众的邮件提问，他好奇的是「网络上能下载到的 XAS 数据质量都很好，那什么是质量不好的数据呢」，「有没有什么特征可以说明数据质量不好」，或者说，如何判断一个 EXAFS 数据质量不好。同时他发来一张他从别人那里收到的数据，如图下。（经过 TA 的同意，隐去样品信息后发出来）</p>
<p><a href="https://i.loli.net/2021/07/18/BRQzvWkPJLYiuZT.png" target="_blank">
  <img src="https://i.loli.net/2021/07/18/BRQzvWkPJLYiuZT.png" alt="image.png" loading="lazy">
</a></p>
<!-- raw HTML omitted -->
<p>我看到了这个数据的第一眼，会有如下观察：</p>
<ol>
<li><em>k</em> &gt; 4 Å^-1^ 以上的数据开始出现明显的噪音；</li>
<li><em>k</em> 空间只采集到了 10 Å^-1^ 以内，如果拿来做 EXAFS 拟合未免太短；</li>
<li><em>k</em>^2^ 权重的图就已经有那么明显的噪音了，如果切换到 <em>k</em>^3^ 更不敢想；</li>
<li>仅仅是一个 scan 的图，虽然有那么高的噪音，但是能看得到 oscillation。</li>
</ol>
<p>那现在看到这张图的你，你会觉得这张图的质量是好还是差呢？不论你的答案如何，仅凭一张图我没有办法回答。 最极端的两个情况：</p>
<ol>
<li>这是一个标准样品（比如氧化铁），随便做，数据质量就应该很好。<strong>那这张图比起肯定是烂得不行</strong>；</li>
<li>这是一个植物样品，里面有铬重金属污染，浓度可能只有几百个 ppm。采集这个数据的人已经尽其所能选到最优实验装置搭配和测试条件，也只能到这个水平了。<strong>那我觉得这真的可以</strong>。</li>
</ol>
<p>在情况 1 和情况 2 之间，中间可能有那么百八十个既不是最烂也不是完全可接受的情况。很显然，我是没法在一篇文章里面穷尽的。这也就是当有人拿着一张图没头没脑地跑来问我，我是只会关掉网页的，因为我什么都不知道。</p>
<p>我打算就用这张没头没脑的图，<strong>假定这是一张数据质量很烂，并且可以试图抢救的谱图</strong>，开一次脑洞猜测一波，跟大家分享一下「如果我看到的数据质量很差的图，我会认为有多少个可能性」。请注意，以下内容已经跟之前的谱图没有任何关系了。</p>
<!-- raw HTML omitted -->
<h3 id="第一怀疑对象样品本身">
  第一怀疑对象：样品本身
  <a class="heading-anchor" href="#%e7%ac%ac%e4%b8%80%e6%80%80%e7%96%91%e5%af%b9%e8%b1%a1%e6%a0%b7%e5%93%81%e6%9c%ac%e8%ba%ab" aria-label="Link to this section">
    <span class="sr-only">Link to this section</span>
    <span aria-hidden="true">#</span>
  </a>
</h3>
<p>遇到数据质量不行的数据，第一反应基本上是样品。原因是 beamline 天天摆在那里运作，为什么就你的数据烂别人就有好数据呢？样品装得烂，可以说是新手最容易犯的错误。我们做实验要像渣男那样思考：出了不好的事情，总得在自己身上找原因。</p>
<ol>
<li><strong>样品浓度是否太低</strong>。检测器都有下限的，样品浓度低于下限，那你测个寂寞？</li>
<li>装样的时候是否<strong>出现汽包</strong>，而数据是<strong>透射谱</strong>？透射谱的一大敌人就是光路中的气泡出现 pothole 效应。在装样品的时候应保证均一性而不出现气泡等奇怪东西。</li>
<li>测量的元素是否是<strong>低能</strong>，比如低于 5 keV？一般来说能量越低，测量的难度越大，整个装置都需要重新考量。</li>
<li>样品是不是<strong>太厚</strong>了？吸收了太多的光导致后面的 ion chamber 降低了信噪比。</li>
</ol>
<h3 id="第二怀疑对象检测器">
  第二怀疑对象：检测器
  <a class="heading-anchor" href="#%e7%ac%ac%e4%ba%8c%e6%80%80%e7%96%91%e5%af%b9%e8%b1%a1%e6%a3%80%e6%b5%8b%e5%99%a8" aria-label="Link to this section">
    <span class="sr-only">Link to this section</span>
    <span aria-hidden="true">#</span>
  </a>
</h3>
<p>检测器包含透射谱中的 ion chamber 和荧光谱的 fluorescence detector。鉴于 ion chamber 包揽了 I<del>0</del>, I<del>1</del>, I<del>2</del>，我们可以先看这个。</p>
<p>关于 ion chamber，最需要留意的三件事：<strong>气体，气密性和外加电压</strong>。气体跟你需要测量的元素能量相关，不能吸收太多也不能吸收太少，能量越高惰性气体越重。对大部分非低能非高能（中间那一堆元素）基本上氮气没跑了，但仍然需要留意气体选择，因为 ion chamber 的长度也有不同。其次，ion chamber 的两端常常是依靠 Kapton 封起来的，尤其在低能测试时，X射线会把 Kapton 给融化了，导致 ion chamber 漏气。既然漏气了，那你还会指望信号棒棒哒？最后是外加电压，如果太大会出现电弧，太低信号不够快。简单来说得在一个合适的区间，高了低了都是噪音。这一部分的信息需要跟 beamline scientist 沟通。</p>
<p>荧光检测器，首先得问你<strong>是否选对了一个匹配的检测器</strong>，比如浓度略低于透射谱下限的，很可能选的是 Lytle or PIPS，而几十 ppm 的浓度可能得用 Ge-100 检测器。那么有用 solar slits 吗，是否用 filter，有没有选对 emission line？有没有 over saturated？</p>
<p>还有你可能根本不会想到的，链接各个检测器的线材还有信号转换器，比如 BNC cable 还有 amplifier，你看不到的那一对信号处理都可以崩到你数据都是噪音。哦，别忘了记得把插头插准了。</p>
<h3 id="第三怀疑对象beamline-station">
  第三怀疑对象：beamline station
  <a class="heading-anchor" href="#%e7%ac%ac%e4%b8%89%e6%80%80%e7%96%91%e5%af%b9%e8%b1%a1beamline-station" aria-label="Link to this section">
    <span class="sr-only">Link to this section</span>
    <span aria-hidden="true">#</span>
  </a>
</h3>
<p>说出来你可能不信，beamline station 可能是歪的。如果是个歪的 beamline，那机械振动可能直接把噪音给你拔高个几百倍。同理可证，地震也可以有类似的效果（不必问我为什么会知道地震可以）。承载着检测器和样品整个 station 大多是光学避震装置，也就是说外界的微小振动是不会影响 station 上面的光学仪器稳定性，如果你见过 Raman 的装置，就差不多。但是天有不测风云 station 有旦夕祸福，人家也可以不开心不工作了，或者说震荡太大人家挡不住。只要不是平的，如果还测 <em>in-situ</em> 实验，你会看到噪音的。</p>
<p>以及整个 station 可能根本就没对准光源来的地方。</p>
<h3 id="你想得到的想不到的-bug">
  你想得到的想不到的 bug
  <a class="heading-anchor" href="#%e4%bd%a0%e6%83%b3%e5%be%97%e5%88%b0%e7%9a%84%e6%83%b3%e4%b8%8d%e5%88%b0%e7%9a%84-bug" aria-label="Link to this section">
    <span class="sr-only">Link to this section</span>
    <span aria-hidden="true">#</span>
  </a>
</h3>
<p>Monochromator: 冷凝器的流速太大，温度没下得来，encoder 不稳定跑着跑着自己跑飞了……</p>
<p>光没有瞄准到样品，达到其他地方了（脱靶）你们不要觉得很扯淡，我看过 N 多人在线站明明根本没有信号还在那里测。</p>
<p>哦，或者说样品移动的时候 X射线脱离焦点了，比如你样品没有装稳……</p>
<p>等等等等……几天几夜都可以数不完的原因。</p>
<!-- raw HTML omitted -->
<p>我希望各位大哥们看完这篇文章不要再问我为什么你们的数据质量那么差了，给各位拜个早年好吧！</p>

      
  <div class="post-tags">
    <ul class="tag-list">
        <li>
          <a class="tag-chip tag-sm" href="/tags/qa/">q&amp;a</a>
        </li>
        <li>
          <a class="tag-chip tag-sm" href="/tags/xafs/">xafs</a>
        </li>
    </ul>
  </div>

    </article>
  </div>
  

  </main>
  <footer>
    <p>My anger matters, so does yours.</p>
<p style="font-size: 12px;">Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> & <a
        href="https://github.com/binbinsh/hugo-trainsh" target="_blank">trainsh</a></p>
  </footer>
  
</body>
</html>
